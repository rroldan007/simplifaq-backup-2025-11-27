[
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "36f23c4a-6dce-4768-99b5-9821589ef433",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC001-User Registration with Valid Data",
    "description": "Verify that a new user can successfully register using valid input data and receive appropriate confirmation.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Navigate to the registration page by clicking the 'Créer un compte' button.\n        frame = context.pages[-1]\n        # Click 'Créer un compte' button to go to registration page\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[4]/p/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input valid password and confirm password, then submit the registration form by clicking 'Suivant' button.\n        frame = context.pages[-1]\n        # Input valid password in 'Mot de passe' field\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test123456!')\n        \n\n        frame = context.pages[-1]\n        # Confirm password in 'Confirmer le mot de passe' field\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test123456!')\n        \n\n        frame = context.pages[-1]\n        # Click 'Suivant' button to submit the registration form\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Registration Complete! Welcome to Your New Account').first).to_be_visible(timeout=30000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The registration process did not complete successfully, and the confirmation message or email was not received as expected.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Registration form submission failed despite valid input. Unable to complete user registration and receive confirmation. Issue reported for developer investigation.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:08.451Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:08.522Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:08.527Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:10.389Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/register} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:10.425Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/register} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:10.432Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/register} (at http://localhost:3000/src/utils/security.ts:197:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766004004153467//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.266Z",
    "modified": "2025-12-17T20:40:04.299Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "38ed6fd7-6102-4af3-ad95-c2b75425ddb2",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC002-User Login with Correct Credentials",
    "description": "Check that a user can log in successfully using valid credentials and receive a JWT token.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input valid registered email and password.\n        frame = context.pages[-1]\n        # Input valid registered email\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('test@simplifaq.ch')\n        \n\n        frame = context.pages[-1]\n        # Input valid password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test123456!')\n        \n\n        # -> Click login button to attempt login.\n        frame = context.pages[-1]\n        # Click login button to submit credentials and attempt login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input valid registered email and password for login.\n        frame = context.pages[-1]\n        # Input valid registered email\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('test@simplifaq.ch')\n        \n\n        frame = context.pages[-1]\n        # Input valid password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test123456!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit credentials and attempt login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        await expect(frame.locator('text=Connexion réussie ! Vous êtes maintenant connecté à SimpliFaq.').first).to_be_visible(timeout=30000)\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766004120672625//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.271Z",
    "modified": "2025-12-17T20:42:00.836Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "9d5d03b1-575a-4af4-8e8b-32293fe9c0c6",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC003-User Login with Incorrect Credentials",
    "description": "Validate that login fails if an incorrect email or password is entered.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input invalid email and/or wrong password.\n        frame = context.pages[-1]\n        # Input invalid email\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('invalid@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input wrong password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('WrongPassword123!')\n        \n\n        frame = context.pages[-1]\n        # Click login button\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Check network requests during login attempt to confirm no token is issued and inspect API response for error details.\n        frame = context.pages[-1]\n        # Click login button again to trigger network request for inspection\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Check network requests to confirm no token is issued and inspect backend response for error details.\n        await page.goto('http://localhost:3000/login', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        frame = context.pages[-1]\n        # Input invalid email for network test\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('invalid@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input wrong password for network test\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('WrongPassword123!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to trigger network request for inspection\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        await expect(frame.locator('text=Se connecter').first).to_be_visible(timeout=30000)\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766004036498296//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.278Z",
    "modified": "2025-12-17T20:40:36.623Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "dada5cc9-bd94-44f3-87b1-d561ba69a686",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC004-Password Reset Flow",
    "description": "Ensure users can request a password reset email and successfully reset their password.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on 'Mot de passe oublié ?' button to navigate to the Forgot Password page.\n        frame = context.pages[-1]\n        # Click on 'Mot de passe oublié ?' button to navigate to the Forgot Password page.\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[3]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Enter the registered email 'test@simplifaq.ch' in the email input and click the submit button to request password reset.\n        frame = context.pages[-1]\n        # Enter the registered email address for password reset.\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/form/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('test@simplifaq.ch')\n        \n\n        frame = context.pages[-1]\n        # Click the button to submit the password reset request.\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Simulate opening the password reset form via the link in the email. Since email access is not possible here, navigate to the password reset form URL if available or simulate the reset form access.\n        await page.goto('http://localhost:3000/reset-password?token=exampletoken', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Input a valid new password and confirm it, then submit the form to reset the password.\n        frame = context.pages[-1]\n        # Input new valid password in the 'Nouveau mot de passe' field.\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('NewPass123!')\n        \n\n        frame = context.pages[-1]\n        # Confirm new valid password in the 'Confirmer le mot de passe' field.\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/form/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('NewPass123!')\n        \n\n        frame = context.pages[-1]\n        # Click the 'Réinitialiser le mot de passe' button to submit the new password.\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Password Reset Successful!').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Password reset process did not complete successfully as expected. The password reset email might not have been sent or the password was not updated.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Password reset process failed due to backend or token validation error. Reported issue and stopped further testing.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:09.767Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:09.838Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:09.849Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:40.292Z, event: AUTH_INTERCEPTOR_NO_TOKEN, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/forgot-password} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.347Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/reset-password?token=exampletoken} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.392Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/reset-password?token=exampletoken} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.396Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/reset-password?token=exampletoken} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:19.308Z, event: AUTH_INTERCEPTOR_NO_TOKEN, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/reset-password?token=exampletoken} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 400 (Bad Request) (at http://localhost:3001/api/auth/reset-password:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:59.000Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/reset-password?token=exampletoken} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:59.038Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/reset-password?token=exampletoken} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:59.046Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/reset-password?token=exampletoken} (at http://localhost:3000/src/utils/security.ts:197:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766004028493148//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.284Z",
    "modified": "2025-12-17T20:40:28.647Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "dc4c5ddf-421b-4071-8e61-33a4eddb5b29",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC005-Client Management CRUD Operations",
    "description": "Verify that users can create, read, update, archive, and search clients including Swiss fiscal data.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input login credentials and submit login form.\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit credentials\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Client creation successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: The test plan execution failed to verify client creation, reading, updating, archiving, and searching including Swiss fiscal data as expected.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failed repeatedly with provided credentials; the login form resets and does not proceed. Unable to test client creation, reading, updating, archiving, or searching. Reporting this issue and stopping further testing.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.476Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.548Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.555Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.928Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.930Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.931Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.739Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.740Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.775Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.776Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.792Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.792Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.854Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.855Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/invoice-status-breakdown?dateFrom=2025-12-01&dateTo=2025-12-17:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003982930927//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.289Z",
    "modified": "2025-12-17T20:39:43.059Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "b6632daf-f8a0-4792-9d4d-5e8fd10067d5",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC006-Invoice Creation and Validation",
    "description": "Test invoice creation with Swiss-compliant structure, including validation of sequential numbering, line items, multiple TVA rates, and automatic calculations.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input login credentials and click login button to authenticate.\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit credentials\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Navigate to New Invoice page by clicking 'Nouvelle facture' button.\n        frame = context.pages[-1]\n        # Click 'Nouvelle facture' button to navigate to New Invoice page\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/main/div/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Re-login to regain session or report the website issue due to unexpected redirection to login page.\n        frame = context.pages[-1]\n        # Re-input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Re-input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to re-authenticate\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on 'Nouvelle facture' button to navigate to New Invoice page.\n        frame = context.pages[-1]\n        # Click 'Nouvelle facture' button to navigate to New Invoice page\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/main/div/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input login credentials and click 'Se connecter' to authenticate and regain access.\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click 'Se connecter' button to login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on 'Nouvelle facture' button to navigate to New Invoice page.\n        frame = context.pages[-1]\n        # Click 'Nouvelle facture' button to navigate to New Invoice page\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/main/div/div/div/div[2]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input login credentials and click 'Se connecter' to authenticate and regain access.\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click 'Se connecter' button to login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Invoice Number 12345').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: Invoice creation with Swiss-compliant structure did not complete successfully. Sequential numbering, line items, multiple TVA rates, or automatic calculations are incorrect or missing.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The test for invoice creation with Swiss-compliant structure could not be completed due to a persistent authentication issue. After successful login attempts, the user is repeatedly redirected to the login page when trying to access the New Invoice page. This prevents testing of sequential numbering, line items, multiple TVA rates, and automatic calculations. The issue has been reported for resolution. Further testing is blocked until the authentication and routing problems are fixed.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:09.750Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:09.823Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:09.829Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:31.585Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:31.586Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:31.586Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] The width(-1) and height(-1) of chart should be greater than 0,\n       please check the style of container, or the props width(100%) and height(100%),\n       or add a minWidth(0) or minHeight(300) or use aspect(undefined) to control the\n       height and width. (at http://localhost:3000/node_modules/.vite/deps/recharts.js?v=d3d88e1d:8840:16)\n[WARNING] The width(-1) and height(-1) of chart should be greater than 0,\n       please check the style of container, or the props width(100%) and height(100%),\n       or add a minWidth(0) or minHeight(250) or use aspect(undefined) to control the\n       height and width. (at http://localhost:3000/node_modules/.vite/deps/recharts.js?v=d3d88e1d:8840:16)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/clients?limit=50:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:52.477Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/invoices/new} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:52.478Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/invoices/new} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=50:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:52.543Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/invoices/new} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:52.544Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/invoices/new} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/auth/me:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:52.558Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/invoices/new} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:52.561Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/invoices/new} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/products?limit=50:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:52.577Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/invoices/new} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:52.578Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/invoices/new} (at http://localhost:3000/src/utils/security.ts:197:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766004237242712//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.300Z",
    "modified": "2025-12-17T20:43:57.379Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "d8df6e7b-1e1a-425b-8f01-e1df880c9e23",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC007-Swiss QR Bill Generation on Invoice PDF",
    "description": "Verify that each invoice PDF includes a correctly generated Swiss QR Bill complying with legal format using the swissqrbill library.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input login credentials and submit login form.\n        frame = context.pages[-1]\n        # Input email address\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit form\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Swiss QR Bill validation successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The invoice PDF does not contain a correctly generated Swiss QR Bill complying with the legal format as required by the test plan.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failed with provided credentials; unable to proceed to invoice generation and verification. Reporting issue and stopping further actions.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.554Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.641Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.646Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.038Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.039Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.039Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.901Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.902Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.099Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.100Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/invoice-status-breakdown?dateFrom=2025-12-01&dateTo=2025-12-17:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.135Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.136Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.138Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003983051535//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.307Z",
    "modified": "2025-12-17T20:39:43.195Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "d0f68833-520f-4334-b7df-3f1c7df6fe22",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC008-Invoice Emailing with Status Tracking",
    "description": "Test forwarding invoice PDFs via email with custom messages and verify invoice status updates accordingly.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password, then click login button.\n        frame = context.pages[-1]\n        # Input email address\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Invoice Sent Successfully').first).to_be_visible(timeout=30000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The invoice email was not sent successfully or the invoice status did not update to Sent as expected.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The login process fails with the provided credentials, preventing access to the application and blocking the testing of forwarding invoice PDFs via email and verifying invoice status updates. The issue has been reported. Task cannot proceed further.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:15.129Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:15.208Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:15.214Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.807Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.808Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.809Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.886Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.887Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.889Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.889Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.890Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.890Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.891Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.906Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/invoice-status-breakdown?dateFrom=2025-12-01&dateTo=2025-12-17:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003986878335//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.312Z",
    "modified": "2025-12-17T20:39:47.005Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "9d84b8b5-ff81-43c3-9120-9c0e69a0256e",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC009-Financial Dashboard Data Accuracy",
    "description": "Ensure the dashboard displays accurate real-time KPIs such as total invoiced, TVA collected, unpaid invoices, and monthly trends.",
    "testStatus": "FAILED",
    "testError": "Test execution timed out after 15 minutes",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "",
    "created": "2025-12-17T20:38:00.318Z",
    "modified": "2025-12-17T20:38:00.318Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "9552bffc-216f-415d-aefe-adee409f8a23",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC010-TVA Reporting and Export",
    "description": "Validate TVA aggregation report generation and exporting options in PDF and CSV formats.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password, then click login button to authenticate.\n        frame = context.pages[-1]\n        # Input email address\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit credentials\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=TVA Report Generation Successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: TVA aggregation report generation and exporting options in PDF and CSV formats did not complete successfully as per the test plan.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failed repeatedly with valid credentials. The page reloads to the login form with empty fields and no navigation. Unable to continue testing TVA report generation and export. Please investigate the login issue.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.529Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.607Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.614Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.862Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.863Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.863Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.721Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.724Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.758Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.759Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.777Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.777Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.782Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.782Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/176600398671752//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.323Z",
    "modified": "2025-12-17T20:39:46.836Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "220e1f60-3ca9-41c6-8883-a246edc2c556",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC011-Admin Panel User and Subscription Management",
    "description": "Test that admin can access the panel, view live user data, manage subscriptions, and filter invoices with real-time SaaS metrics.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input admin email and password, then click login button.\n        frame = context.pages[-1]\n        # Input admin email\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('test@simplifaq.ch')\n        \n\n        frame = context.pages[-1]\n        # Input admin password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test123456!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to log in as admin\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Close the welcome popup and navigate to the Admin panel dashboard.\n        frame = context.pages[-1]\n        # Close the welcome popup by clicking the close button\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Close the welcome popup to fully access the admin panel dashboard and verify live data for users, subscriptions, invoices, and SaaS KPIs.\n        frame = context.pages[-1]\n        # Click to close the welcome popup on the dashboard\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/div/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Navigate to the 'Facturation' tab to access invoice filtering options and test filtering invoices by status and client.\n        frame = context.pages[-1]\n        # Click on 'Facturation' tab to view invoices and filtering options\n        elem = frame.locator('xpath=html/body/div/div/div/div/nav/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Subscription Invoice Successfully Created').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: Admin panel test plan execution failed. Unable to verify live user data, manage subscriptions, and filter invoices with real-time SaaS metrics as expected.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Testing stopped due to unexpected logout issue when accessing invoice filtering. Admin panel login and dashboard access succeeded, but session handling or permissions need investigation to proceed further.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:13.902Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:13.970Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:13.981Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.006Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.006Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.008Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] The width(-1) and height(-1) of chart should be greater than 0,\n       please check the style of container, or the props width(100%) and height(100%),\n       or add a minWidth(0) or minHeight(300) or use aspect(undefined) to control the\n       height and width. (at http://localhost:3000/node_modules/.vite/deps/recharts.js?v=d3d88e1d:8840:16)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:15.843Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:15.883Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:15.889Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:16.044Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:39:16.044Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] The width(-1) and height(-1) of chart should be greater than 0,\n       please check the style of container, or the props width(100%) and height(100%),\n       or add a minWidth(0) or minHeight(300) or use aspect(undefined) to control the\n       height and width. (at http://localhost:3000/node_modules/.vite/deps/recharts.js?v=d3d88e1d:8840:16)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:40:04.920Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:40:04.921Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:40:04.960Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:40:04.961Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766004106626049//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.329Z",
    "modified": "2025-12-17T20:41:46.772Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "b95dd8d2-93c1-49d5-85d1-0e594ed3624b",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC012-Stripe Subscription Integration Webhook Handling",
    "description": "Verify that Stripe webhook events correctly update user subscription status and billing permissions in the application.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password, then click login button\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to authenticate user\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Subscription Activated Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: Stripe webhook events did not correctly update user subscription status and billing permissions as expected.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failed repeatedly with valid credentials, blocking further testing of Stripe webhook event handling. Reporting issue and stopping the task.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.945Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:15.030Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:15.036Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.788Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.788Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.789Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.690Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.691Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.705Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.706Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.726Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.726Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.733Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.733Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/invoice-status-breakdown?dateFrom=2025-12-01&dateTo=2025-12-17:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/176600398094851//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.334Z",
    "modified": "2025-12-17T20:39:41.123Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "64cad1d4-509c-41f6-abcc-8e1d32c5f665",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC013-Invoice Payment Status and Error Handling",
    "description": "Validate that invoices correctly update status from Sent to Paid upon payment confirmation and handle error states gracefully.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password, then click login button\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to authenticate\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Retry login by inputting credentials again and clicking login button\n        frame = context.pages[-1]\n        # Re-input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Re-input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to authenticate again\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Nouvelle facture' button to create a new invoice\n        frame = context.pages[-1]\n        # Click 'Nouvelle facture' button to create a new invoice\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/main/div/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input login credentials and click login button to regain access to dashboard\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to authenticate\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Nouvelle facture' button to start creating a new invoice\n        frame = context.pages[-1]\n        # Click 'Nouvelle facture' button to create a new invoice\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/main/div/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Restaurer' button to restore draft invoice and proceed with editing.\n        frame = context.pages[-1]\n        # Click 'Restaurer' button to restore draft invoice\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/form/div/div[2]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input client name in client search input (index 17) to select or add client\n        frame = context.pages[-1]\n        # Input client name in client search field\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/form/div[3]/div/div/div/div/div/div/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Chocolaterie Suisse SA')\n        \n\n        # -> Click 'Créer un nouveau client' button to add new client\n        frame = context.pages[-1]\n        # Click 'Créer un nouveau client' button to add new client\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/form/div[3]/div/div/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Invoice Payment Confirmed Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Invoice status did not update from Sent to Paid upon payment confirmation, or error states were not handled gracefully as per the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Testing stopped due to unexpected redirect to login page when attempting to add a new client. This blocks the ability to create invoices and validate status updates from Sent to Paid and error handling. Please investigate session or authorization issues.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:13.971Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.050Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.057Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.062Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.063Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.064Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)\n[ERROR] [Dashboard] Error loading data: Error: Session non trouvée\n    at Object.getKpis (http://localhost:3000/src/services/reportsApi.ts:15:22)\n    at async Promise.all (index 0)\n    at async load (http://localhost:3000/src/pages/DashboardPage.tsx:211:27) (at http://localhost:3000/src/pages/DashboardPage.tsx:223:16)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.997Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.998Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.030Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.031Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.033Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.036Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.038Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766004253534617//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.339Z",
    "modified": "2025-12-17T20:44:13.840Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "ee576502-066c-46b8-988c-3d706bb36339",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC014-UI Responsiveness and Accessibility Check",
    "description": "Ensure that all main user interface components including forms, tables, and navigation are responsive and accessible across devices.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input login credentials and submit to access dashboard page for further testing.\n        frame = context.pages[-1]\n        # Input email in login form\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password in login form\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit form\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=UI Components Fully Responsive and Accessible').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The test plan execution has failed because not all main user interface components including forms, tables, and navigation are responsive and accessible across devices as required.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failure prevents access to core pages for testing. Reported issue and stopping further actions.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.545Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.623Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.628Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.114Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.115Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.116Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.873Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.874Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.006Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.007Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/invoice-status-breakdown?dateFrom=2025-12-01&dateTo=2025-12-17:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.029Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.030Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.037Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003983405579//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.345Z",
    "modified": "2025-12-17T20:39:43.556Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "5a050241-b759-4946-a453-92deb745652d",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC015-Security of JWT Authentication and Password Storage",
    "description": "Test that JWT tokens are securely issued and validated, and that passwords are stored using bcrypt encryption with no plaintext exposure.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password and submit login form to obtain JWT token and test login functionality\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('test@simplifaq.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test123456!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit credentials\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Close welcome modal and proceed to backend API to check password storage and JWT token validation\n        frame = context.pages[-1]\n        # Close welcome modal\n        elem = frame.locator('xpath=html/body/div/div/div[2]/main/div/div/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Register a new user to inspect backend password storage as per test instructions\n        frame = context.pages[-1]\n        # Click 'Créer un compte' to register a new user\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[4]/p/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input first name, skip last name, input email, password, confirm password, then submit registration form\n        frame = context.pages[-1]\n        # Input first name\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Jean')\n        \n\n        frame = context.pages[-1]\n        # Input email\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('jean.dupont@entreprise.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test123456!')\n        \n\n        frame = context.pages[-1]\n        # Confirm password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test123456!')\n        \n\n        frame = context.pages[-1]\n        # Click 'Suivant' to submit registration form\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Retry inputting last name 'Dupont' into index 2 and then click 'Suivant' to submit registration form\n        frame = context.pages[-1]\n        # Retry input last name\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Dupont')\n        \n\n        frame = context.pages[-1]\n        # Click 'Suivant' to submit registration form\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Suivant' button to submit personal information and proceed to next registration step\n        frame = context.pages[-1]\n        # Click 'Suivant' to submit personal information form\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=JWT Token Validation Successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: JWT tokens are not securely issued or validated, or passwords are not stored using bcrypt encryption as required by the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Testing stopped due to critical issue: registration form input fields do not accept text input, preventing user registration and verification of password hashing and JWT token issuance. The issue has been reported for resolution. Further testing cannot proceed until this is fixed.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:13.413Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:13.480Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:13.490Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:34.342Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:34.342Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:34.343Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] The width(-1) and height(-1) of chart should be greater than 0,\n       please check the style of container, or the props width(100%) and height(100%),\n       or add a minWidth(0) or minHeight(300) or use aspect(undefined) to control the\n       height and width. (at http://localhost:3000/node_modules/.vite/deps/recharts.js?v=d3d88e1d:8840:16)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/welcome-shown:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:55.610Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:55.618Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/auth/refresh:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.272Z, event: TOKEN_REFRESH_FAILED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.273Z, event: AUTH_INTERCEPTOR_REJECTING_QUEUE, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.273Z, event: AUTH_REFRESH_FAILED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.273Z, event: TOKEN_CLEARED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.274Z, event: AUTH_TOKEN_CORRUPTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.274Z, event: AUTH_LOGOUT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.275Z, event: TOKEN_CLEARED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:56.275Z, event: AUTH_TOKEN_EXPIRED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] [AuthContext] handleCorrupted already in progress, skipping... (at http://localhost:3000/src/contexts/AuthContext.tsx:121:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/176600423694651//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.350Z",
    "modified": "2025-12-17T20:43:57.129Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "3ec6750b-91d4-4b00-a0c7-5a2d788f704c",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC016-Product Catalog Management CRUD and Pricing",
    "description": "Verify users can manage product catalog by adding, editing, deleting products, and prices are correctly reflected on invoices.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password, then click login button.\n        frame = context.pages[-1]\n        # Input email address\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Product catalog updated successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: Unable to verify product catalog management including adding, editing, deleting products, and price reflection on invoices as per the test plan.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failed with provided credentials, blocking further testing of product catalog management. Reported issue and stopped.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.686Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.759Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.765Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.889Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.889Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.891Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.783Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.796Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.819Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.821Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.824Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.824Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.837Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.839Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003981650751//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.355Z",
    "modified": "2025-12-17T20:39:41.781Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "f873cee2-0b93-4455-9a8c-ac482d0f16b1",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC017-Quote Management and Conversion to Invoice",
    "description": "Test that users can create quotes/estimates, edit them, and convert these quotes into fully compliant invoices.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password, then click login button\n        frame = context.pages[-1]\n        # Input email address\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Invoice Successfully Created').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The quote creation, editing, and conversion to a compliant invoice did not complete successfully as per the test plan.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failed with provided credentials; cannot proceed with testing quotes and invoices. Issue reported.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.343Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.421Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.427Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:35.988Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:35.989Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:35.989Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.004Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.005Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.039Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.043Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.046Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.059Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.061Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.062Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003980457313//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.361Z",
    "modified": "2025-12-17T20:39:40.575Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "3af1f626-b370-4052-9bd6-f690b3ef608e",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC018-Expense Tracking and Management",
    "description": "Ensure users can record, edit, and delete expenses and that expense totals are reflected in financial reports.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password, then click login button.\n        frame = context.pages[-1]\n        # Input email address\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Expense record successfully saved').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The test plan execution failed to verify that users can record, edit, and delete expenses and that expense totals are reflected in financial reports.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failed with provided credentials; cannot proceed with expense management testing. Issue reported.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.208Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.281Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.286Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:35.363Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:35.363Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:35.364Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] The width(-1) and height(-1) of chart should be greater than 0,\n       please check the style of container, or the props width(100%) and height(100%),\n       or add a minWidth(0) or minHeight(300) or use aspect(undefined) to control the\n       height and width. (at http://localhost:3000/node_modules/.vite/deps/recharts.js?v=d3d88e1d:8840:16)\n[WARNING] The width(-1) and height(-1) of chart should be greater than 0,\n       please check the style of container, or the props width(100%) and height(100%),\n       or add a minWidth(0) or minHeight(250) or use aspect(undefined) to control the\n       height and width. (at http://localhost:3000/node_modules/.vite/deps/recharts.js?v=d3d88e1d:8840:16)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/auth/me:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.287Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.290Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/auth/refresh:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.713Z, event: TOKEN_REFRESH_FAILED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.713Z, event: AUTH_INTERCEPTOR_REJECTING_QUEUE, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.713Z, event: AUTH_REFRESH_FAILED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.724Z, event: TOKEN_CLEARED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.725Z, event: AUTH_TOKEN_CORRUPTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.727Z, event: AUTH_LOGOUT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.727Z, event: TOKEN_CLEARED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:38.729Z, event: AUTH_TOKEN_EXPIRED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003982349849//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.366Z",
    "modified": "2025-12-17T20:39:42.500Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "9fece9b0-9510-49a6-a338-f30e1d957dec",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC019-Settings Configuration Including SMTP and Themes",
    "description": "Test that users can update company settings such as SMTP for email sending and select UI themes with saved preferences.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input email and password, then click login button to access the application.\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit credentials\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=SMTP server updated successfully').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The test plan execution failed because the SMTP server update confirmation message was not found, indicating that settings were not saved or email sending did not succeed.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failure prevents further testing of company settings and UI theme preferences. Issue reported for resolution.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.690Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.775Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.782Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.829Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.830Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.830Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.652Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.653Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.660Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.660Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.690Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.691Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.695Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.696Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/kpis?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003983188498//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.371Z",
    "modified": "2025-12-17T20:39:43.318Z"
  },
  {
    "projectId": "9a93e5df-fbe3-4c5d-bc1a-e584c8ed20e8",
    "testId": "6d5b70e3-206a-4c99-94aa-311ed50d0e14",
    "userId": "7408d498-1031-7035-173c-22395d5abdfe",
    "title": "TC020-Prevent Implementation of Out-of-Scope Features",
    "description": "Verify the system does not include any full accounting, payroll, or international invoicing features.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Input login credentials and submit login form\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('demo@chocolaterie-suisse.ch')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('DemoUser2024!')\n        \n\n        frame = context.pages[-1]\n        # Click login button to submit credentials\n        elem = frame.locator('xpath=html/body/div/div/div[2]/div/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Full Accounting Feature Enabled').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The system should not include any full accounting, payroll, or international invoicing features, but the test plan execution indicates failure.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login failed with provided credentials, preventing access to the system for verification of features. Reporting issue and stopping further actions.\nBrowser Console Logs:\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.600Z, event: TOKEN_CROSS_TAB_LISTENER_STARTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.678Z, event: FORM_CLEANUP_COMPLETED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:14.683Z, event: FORM_PRESERVATION_INITIALIZED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.088Z, event: TOKEN_STORED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.089Z, event: AUTH_SUCCESS_WITH_TOKEN_MANAGER, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:36.089Z, event: AUTH_LOGIN_SUCCESS, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/login} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=5&sort=createdAt:desc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.036Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.037Z, event: TOKEN_REFRESH_ATTEMPT, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/revenue-series?dateFrom=2025-12-01&dateTo=2025-12-17&currency=CHF&granularity=monthly:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/onboarding/status:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.058Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.059Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/reports/financial-summary:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.074Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.074Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3001/api/invoices?limit=200&sortBy=dueDate&sortOrder=asc:0:0)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.083Z, event: AUTH_INTERCEPTOR_401_DETECTED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[WARNING] Security Event: {timestamp: 2025-12-17T20:38:37.083Z, event: AUTH_INTERCEPTOR_REQUEST_QUEUED, details: Object, userAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWeb…L, like Gecko) Chrome/85.0.4183.102 Safari/537.36, url: http://localhost:3000/dashboard?from=2025-12-01&to=2025-12-17&ccy=CHF&g=monthly} (at http://localhost:3000/src/utils/security.ts:197:14)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reports/invoice-status-breakdown?dateFrom=2025-12-01&dateTo=2025-12-17:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/7408d498-1031-7035-173c-22395d5abdfe/1766003982394012//tmp/test_task/result.webm",
    "created": "2025-12-17T20:38:00.377Z",
    "modified": "2025-12-17T20:39:42.573Z"
  }
]
