@import './styles/themes.css';
@import './styles/water-overrides.css';
/* Self-hosted Inter Variable font (single source to avoid sanitizer confusion) */
@font-face {
  font-family: 'Inter';
  src: url('/fonts/InterVariable.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

/* If you later add InterVariable-Italic.woff2, you can enable this block:
@font-face {
  font-family: 'Inter';
  src: url('/fonts/InterVariable-Italic.woff2') format('woff2');
  font-weight: 100 900;
  font-style: italic;
  font-display: swap;
}
*/
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html, body, #root {
    min-height: 100%;
  }
  .chip-success {
    background: linear-gradient(135deg, rgba(16,185,129,0.25) 0%, rgba(5,150,105,0.25) 100%);
    color: #6ee7b7;
    border: 1px solid var(--color-border-primary);
  }
  .chip-warning {
    background: linear-gradient(135deg, rgba(251,191,36,0.25) 0%, rgba(245,158,11,0.25) 100%);
    color: #fde68a;
    border: 1px solid var(--color-border-primary);
  }
  .chip-error {
    background: linear-gradient(135deg, rgba(239,68,68,0.25) 0%, rgba(220,38,38,0.25) 100%);
    color: #fca5a5;
    border: 1px solid var(--color-border-primary);
  }

  /* Print helpers to control page breaks (apply these classes in markup) */
  .page-break-before {
    break-before: page !important;
    page-break-before: always !important;
  }
  .avoid-break-inside {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }
  body, #root {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    background-color: var(--color-bg-primary);
    color: var(--color-text-primary);
  }

  /* Hard-ensure dark document background when synthwave is active */
  [data-theme="synthwave"] body,
  [data-theme="synthwave"] #root,
  [data-theme="synthwave"] html {
    background-color: var(--color-base-100) !important;
    color: var(--color-base-content) !important;
  }
}

@layer components {
  .btn-primary {
    @apply bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors;
  }
  
  .btn-secondary {
    @apply bg-white text-gray-700 px-4 py-2 rounded-lg font-medium border border-gray-300 hover:bg-gray-50 transition-colors;
  }
  
  .input-field {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
  }

  /* Hide number input spinners for better UX */
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  
  input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
  }
}

/* Super Cool Dark Mode - Premium Overrides */
@layer utilities {
  /* Theme utilities: use CSS variables so we avoid mapping many Tailwind light classes */
  .surface {
    background: linear-gradient(135deg, var(--color-surface-primary) 0%, var(--color-surface-secondary) 100%);
    color: var(--color-text-primary);
  }
  .surface-elevated {
    background: linear-gradient(135deg, var(--color-surface-secondary) 0%, var(--color-surface-elevated) 100%);
    color: var(--color-text-primary);
  }
  .text-primary { color: var(--color-text-primary); }
  .text-secondary { color: var(--color-text-secondary); }
  .border-primary { border-color: var(--color-border-primary); }

  /* Chips/badges generic */
  .chip-neutral {
    background: linear-gradient(135deg, rgba(156,163,175,0.25) 0%, rgba(209,213,219,0.25) 100%);
    color: var(--color-text-secondary);
    border: 1px solid var(--color-border-primary);
  }
  .chip-active {
    background: linear-gradient(135deg, rgba(99,102,241,0.25) 0%, rgba(139,92,246,0.25) 100%);
    color: #a5b4fc;
    border: 1px solid var(--color-border-primary);
  }

  /* Inputs */
  .input-theme {
    background-color: var(--color-surface-primary);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-primary);
  }
  .input-theme::placeholder { color: var(--color-text-secondary); }

  /* Background class overrides pruned: components now use .surface/.surface-elevated */
  
  /* Text class overrides pruned: components now use .text-primary/.text-secondary */
  
  /* Specific improvements for invoice/card text */
  [data-theme="synthwave"] .text-slate-600,
  [data-theme="synthwave"] .text-slate-500,
  [data-theme="synthwave"] .text-slate-700 {
    color: #cbd5e1 !important;
    font-weight: 600 !important;
  }
  
  /* Numbers and amounts should be very visible */
  [data-theme="synthwave"] .font-semibold,
  [data-theme="synthwave"] .font-bold {
    color: #f1f5f9 !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7) !important;
  }
  
  /* Small text improvements */
  [data-theme="synthwave"] .text-xs,
  [data-theme="synthwave"] .text-sm {
    color: #e2e8f0 !important;
    font-weight: 500 !important;
  }
  
  /* Border class overrides pruned: components now use .border-primary */
  
  /* Hover gray class overrides pruned */
  
  /* Special elements with premium styling */
  [data-theme="synthwave"] thead.bg-gray-50 {
    background: linear-gradient(135deg, var(--color-surface-secondary) 0%, var(--color-surface-elevated) 100%) !important;
    border-bottom: 2px solid var(--color-border-focus) !important;
  }
  
  /* Success/Alert boxes with better visibility */
  [data-theme="synthwave"] .bg-green-50,
  [data-theme="synthwave"] .bg-green-100 {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.25) 100%) !important;
    border: 1px solid rgba(16, 185, 129, 0.3) !important;
    box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.1) !important;
  }
  
  [data-theme="synthwave"] .text-green-600,
  [data-theme="synthwave"] .text-green-700,
  [data-theme="synthwave"] .text-green-800 {
    color: #34d399 !important;
    font-weight: 600 !important;
  }
  
  /* Card improvements with glassmorphism effect */
  [data-theme="synthwave"] .rounded-lg,
  [data-theme="synthwave"] .rounded-md {
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
  }
  
  /* Button improvements */
  [data-theme="synthwave"] .bg-blue-600 {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
    box-shadow: 0 4px 14px 0 rgba(99, 102, 241, 0.4) !important;
  }
  
  [data-theme="synthwave"] .hover\:bg-blue-700:hover {
    background: linear-gradient(135deg, #5b21b6 0%, #7c3aed 100%) !important;
    box-shadow: 0 6px 20px 0 rgba(99, 102, 241, 0.6) !important;
    transform: translateY(-2px) !important;
  }
  
  /* Sidebar active state improvements */
  [data-theme="synthwave"] .bg-blue-50 {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%) !important;
    border-left: 3px solid #6366f1 !important;
    box-shadow: inset 0 0 0 1px rgba(99, 102, 241, 0.3) !important;
  }
  
  [data-theme="synthwave"] .text-blue-700,
  [data-theme="synthwave"] .text-blue-600 {
    color: #a5b4fc !important;
    font-weight: 600 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
  }
  
  /* Invoice badges and status improvements */
  [data-theme="synthwave"] .bg-green-100 {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.25) 0%, rgba(5, 150, 105, 0.25) 100%) !important;
    border: 1px solid rgba(16, 185, 129, 0.4) !important;
    box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2) !important;
  }
  
  [data-theme="synthwave"] .bg-red-100 {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.25) 0%, rgba(220, 38, 38, 0.25) 100%) !important;
    border: 1px solid rgba(239, 68, 68, 0.4) !important;
    box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2) !important;
  }
  
  [data-theme="synthwave"] .bg-blue-100 {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(37, 99, 235, 0.25) 100%) !important;
    border: 1px solid rgba(59, 130, 246, 0.4) !important;
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2) !important;
  }
  
  [data-theme="synthwave"] .text-green-800,
  [data-theme="synthwave"] .text-green-700 {
    color: #6ee7b7 !important;
    font-weight: 700 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7) !important;
  }
  
  [data-theme="synthwave"] .text-red-800,
  [data-theme="synthwave"] .text-red-700 {
    color: #fca5a5 !important;
    font-weight: 700 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7) !important;
  }
  
  [data-theme="synthwave"] .text-blue-800,
  [data-theme="synthwave"] .text-blue-700 {
    color: #93c5fd !important;
    font-weight: 700 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7) !important;
  }
  
  /* Invoice codes and identifiers */
  [data-theme="synthwave"] .font-mono,
  [data-theme="synthwave"] .font-medium {
    color: #f1f5f9 !important;
    font-weight: 600 !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8) !important;
  }
  
  /* Specific improvements for invoice list items */
  [data-theme="synthwave"] .text-slate-800,
  [data-theme="synthwave"] .text-slate-900 {
    color: #f8fafc !important;
    font-weight: 600 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6) !important;
  }
  
  /* Button improvements for better visibility */
  [data-theme="synthwave"] button:not(.bg-blue-600):not(.bg-green-600):not(.bg-red-600):not(.bg-purple-600) {
    background: linear-gradient(135deg, #374151 0%, #4b5563 100%) !important;
    color: #f9fafb !important;
    border: 1px solid #6b7280 !important;
    font-weight: 500 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5) !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
    transition: all 0.3s ease !important;
  }
  
  [data-theme="synthwave"] button:not(.bg-blue-600):not(.bg-green-600):not(.bg-red-600):not(.bg-purple-600):hover {
    background: linear-gradient(135deg, #4b5563 0%, #6b7280 100%) !important;
    border-color: #9ca3af !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4) !important;
  }
  
  /* Secondary buttons with light backgrounds */
  [data-theme="synthwave"] .bg-gray-200,
  [data-theme="synthwave"] .bg-gray-300 {
    background: linear-gradient(135deg, #475569 0%, #64748b 100%) !important;
    color: #f1f5f9 !important;
    border: 1px solid #64748b !important;
  }
  
  [data-theme="synthwave"] .hover\:bg-gray-300:hover {
    background: linear-gradient(135deg, #64748b 0%, #78716c 100%) !important;
    color: #f8fafc !important;
  }
  
  /* Outline buttons */
  [data-theme="synthwave"] .border-gray-300 {
    border-color: #6b7280 !important;
    background: rgba(55, 65, 81, 0.5) !important;
    color: #f9fafb !important;
    backdrop-filter: blur(4px) !important;
  }
  
  [data-theme="synthwave"] .border-gray-300:hover {
    border-color: #9ca3af !important;
    background: rgba(75, 85, 99, 0.8) !important;
  }
  
  /* Action buttons with specific styling */
  [data-theme="synthwave"] .text-gray-600:not(.bg-blue-600):not(.bg-green-600):not(.bg-red-600) {
    color: #e5e7eb !important;
    font-weight: 600 !important;
  }
  
  /* Filter buttons and tabs */
  [data-theme="synthwave"] .bg-transparent {
    background: rgba(55, 65, 81, 0.3) !important;
    border: 1px solid rgba(107, 114, 128, 0.5) !important;
    color: #d1d5db !important;
    backdrop-filter: blur(4px) !important;
  }
  
  [data-theme="synthwave"] .bg-transparent:hover {
    background: rgba(75, 85, 99, 0.6) !important;
    border-color: rgba(156, 163, 175, 0.7) !important;
    color: #f3f4f6 !important;
  }
  
  /* Fix for "jours restants" text visibility */
  [data-theme="synthwave"] .text-white {
    color: #1f2937 !important;
    background: rgba(243, 244, 246, 0.95) !important;
    padding: 2px 6px !important;
    border-radius: 4px !important;
    font-weight: 600 !important;
    text-shadow: none !important;
  }
  
  /* Fix for "Brouillon" badge visibility */
  [data-theme="synthwave"] .bg-gray-100:not(.hover\:bg-gray-100) {
    background: linear-gradient(135deg, rgba(156, 163, 175, 0.3) 0%, rgba(209, 213, 219, 0.3) 100%) !important;
    border: 1px solid rgba(156, 163, 175, 0.5) !important;
    color: #e5e7eb !important;
    font-weight: 600 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7) !important;
  }
  
  [data-theme="synthwave"] .text-gray-800:not(.font-semibold):not(.font-bold) {
    color: #f3f4f6 !important;
    font-weight: 600 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7) !important;
  }
  
  /* Specific improvements for invoice status badges */
  [data-theme="synthwave"] .bg-yellow-100 {
    background: linear-gradient(135deg, rgba(251, 191, 36, 0.25) 0%, rgba(245, 158, 11, 0.25) 100%) !important;
    border: 1px solid rgba(251, 191, 36, 0.4) !important;
    box-shadow: 0 2px 4px rgba(251, 191, 36, 0.2) !important;
  }
  
  [data-theme="synthwave"] .text-yellow-800,
  [data-theme="synthwave"] .text-yellow-700 {
    color: #fde047 !important;
    font-weight: 700 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7) !important;
  }

  /* Neutral bg overrides pruned */

  /* Text mapping overrides pruned */

  /* Border/divide overrides pruned */

  /* Inputs/selects default mapping */
  [data-theme="synthwave"] input[type="text"],
  [data-theme="synthwave"] input[type="email"],
  [data-theme="synthwave"] input[type="number"],
  [data-theme="synthwave"] select,
  [data-theme="synthwave"] textarea {
    background-color: var(--color-surface-primary) !important;
    color: var(--color-text-primary) !important;
    border: 1px solid var(--color-border-primary) !important;
  }
  [data-theme="synthwave"] input::placeholder,
  [data-theme="synthwave"] textarea::placeholder {
    color: var(--color-text-tertiary) !important;
  }
}

@layer components {
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200;
  }
  /* Dark theme card mapping */
  [data-theme="synthwave"] .card {
    background: linear-gradient(135deg, var(--color-surface-primary) 0%, var(--color-surface-secondary) 100%) !important;
    border-color: var(--color-border-primary) !important;
    box-shadow: 0 6px 18px rgba(0,0,0,0.35) !important;
  }
}

/* Print styles for invoice PDF to match on-screen template */
@media print {
  /* Force exact color rendering in print */
  html, body {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    background: #ffffff !important;
  }

  /* A4 page setup */
  @page {
    size: A4;
    margin: 16mm;
  }

  /* Scope invoice document */
  .invoice-doc {
    font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif !important;
    color: #0f172a !important; /* slate-900 */
    /* A4 inner width: 210mm - 2*16mm margins = 178mm */
    width: 178mm !important;
    /* Enforce variable font usage in print */
    font-synthesis: none !important;
    font-synthesis-weight: none !important;
    font-synthesis-style: none !important;
    font-variation-settings: 'wght' 400 !important;
  }

  /* Normalize header sizing to match Tailwind classes used in ElegantClassic */
  .invoice-doc > .bg-white > .text-white {
    padding-left: 24px !important; /* px-6 */
    padding-right: 24px !important;
    padding-top: 16px !important; /* py-4 */
    padding-bottom: 16px !important;
    /* Ensure proper vertical centering in print by making header a flex container */
    display: flex !important;
    align-items: center !important;
    /* Provide a stable height that mirrors typical header visuals */
    min-height: 64px !important;
  }
  /* Make inner flex container span full width for proper spacing */
  .invoice-doc > .bg-white > .text-white > .flex {
    width: 100% !important;
  }
  .invoice-doc h2 {
    font-size: 20px !important; /* text-xl */
    line-height: 28px !important; /* leading-7 */
    font-weight: 600 !important;
    font-variation-settings: 'wght' 600 !important;
  }

  /* Strengthen weights for common emphasis elements */
  .invoice-doc .font-semibold,
  .invoice-doc th,
  .invoice-doc thead th,
  .invoice-doc .font-bold,
  .invoice-doc .text-xl,
  .invoice-doc .text-2xl {
    font-variation-settings: 'wght' 600 !important;
  }

  /* Containers */
  .invoice-doc .bg-white {
    background: #ffffff !important;
    box-shadow: none !important;
  }

  /* Colored header bars (e.g., accent) */
  .invoice-doc [style*="background-color"] {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* Repeat table header on each printed page and avoid row breaks */
  .invoice-doc table {
    width: 100% !important;
    border-collapse: collapse !important;
    page-break-inside: auto !important;
  }
  .invoice-doc thead { display: table-header-group !important; }
  .invoice-doc tfoot { display: table-footer-group !important; }
  .invoice-doc tr, .invoice-doc td, .invoice-doc th {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }

  /* Neutralize wrappers that can break header repetition across pages */
  .invoice-doc .overflow-hidden { overflow: visible !important; }
  .invoice-doc .rounded-lg, .invoice-doc .rounded { border-radius: 0 !important; }
  .invoice-doc .border { border-width: 1px !important; }

  /* Tables: ensure borders and spacing */
  .invoice-doc table {
    width: 100% !important;
    table-layout: fixed !important;
    border-collapse: collapse !important;
    border-spacing: 0 !important;
  }
  .invoice-doc thead, .invoice-doc tbody, .invoice-doc tfoot {
    page-break-inside: avoid !important;
  }
  .invoice-doc thead {
    background: #f8fafc !important; /* slate-50 */
    color: #475569 !important; /* slate-600 */
  }
  .invoice-doc th,
  .invoice-doc td {
    border: 1px solid #e2e8f0 !important; /* slate-200 */
    padding: 6px 8px !important;
    vertical-align: top !important;
    word-wrap: break-word !important;
  }

  .invoice-doc th {
    font-weight: 600 !important;
    text-align: left !important;
    font-size: 11pt !important;
  }

  .invoice-doc td {
    font-size: 11pt !important;
    color: #0f172a !important;
  }

  /* Totals section emphasize */
  .invoice-doc .font-semibold,
  .invoice-doc .text-base {
    font-weight: 600 !important;
    font-size: 12pt !important;
    color: #0f172a !important;
  }

  /* Images (logo) ensure crisp print */
  .invoice-doc img {
    image-rendering: -webkit-optimize-contrast !important;
    max-width: 100% !important;
    display: block !important; /* avoid baseline gaps affecting vertical centering */
  }

  /* Remove interactive-only UI shadows/borders in print */
  .invoice-doc .shadow,
  .invoice-doc .shadow-sm,
  .invoice-doc .shadow-md,
  .invoice-doc .border-slate-200,
  .invoice-doc .border-gray-200 {
    box-shadow: none !important;
  }
}